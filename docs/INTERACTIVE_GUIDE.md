# 交互式模式使用指南

## 🚀 新增功能

FolderSnapshot v3.1 的交互式模式现在支持自定义输出路径！

### ✨ 主要改进

1. **📝 默认路径预览** - 显示智能生成的默认输出路径
2. **🎯 自定义输出路径** - 支持完全自定义输出位置
3. **📂 目录输出** - 可以指定输出目录，自动生成文件名
4. **🔄 冲突避免** - 自动处理文件名冲突
5. **📊 文件信息** - 显示生成文件的大小
6. **⚠️ 错误处理** - 改进的错误提示和处理

## 📖 使用方法

### 启动交互式模式

```bash
python3 FolderSnapshot.py
```

### 操作流程

```
=== 文件快照工具 (v3.1) ===
1. 创建快照文件 (无压缩，支持所有文件类型)
2. 创建高压缩率快照文件 (LZMA)
3. 从快照文件恢复 (自动识别压缩类型)
0. 退出

请选择功能 (1/2/3/0): 2

请输入要处理的文件夹或文件路径: /path/to/source

💡 默认输出路径: /path/to/source_compressed_20240123_143052.txt
请输入自定义输出路径 (直接回车使用默认路径): 

📁 将保存到: /path/to/source_compressed_20240123_143052.txt
处理进度: [##################################################] 100%
压缩比例: 原始大小 125.43 KB → 压缩后 28.67 KB (减少 77.15%)

✅ 操作完成! 输出文件: /path/to/source_compressed_20240123_143052.txt
📄 文件大小: 28.67 KB
```

## 🎯 输出路径选项

### 1. 使用默认路径

```
请输入自定义输出路径 (直接回车使用默认路径): [直接按回车]
```

**结果**: 使用带时间戳的智能命名
- 压缩: `source_compressed_20240123_143052.txt`
- 快照: `source_snapshot_20240123_143052.txt`

### 2. 指定完整文件路径

```
请输入自定义输出路径 (直接回车使用默认路径): /backups/my_project_backup.txt
```

**结果**: 保存到指定的完整路径

### 3. 指定输出目录

```
请输入自定义输出路径 (直接回车使用默认路径): /backups/
```

**结果**: 在指定目录下自动生成文件名
- `/backups/compressed_files_source.txt`

### 4. 相对路径

```
请输入自定义输出路径 (直接回车使用默认路径): ./backups/project.txt
```

**结果**: 相对于当前目录的路径

## 🔧 高级功能

### 自动冲突处理

如果指定的文件已存在，系统会自动添加数字后缀：

```
my_backup.txt → my_backup_1.txt → my_backup_2.txt
```

### 目录自动创建

如果输出路径的目录不存在，系统会自动创建：

```
输入: /new/backup/dir/file.txt
结果: 自动创建 /new/backup/dir/ 目录
```

### 路径验证

系统会自动验证和规范化路径：

```
输入: ~/backups/../backups/file.txt
结果: /Users/username/backups/file.txt
```

## 📊 实际使用示例

### 示例 1: 项目代码备份

```
请选择功能 (1/2/3/0): 2
请输入要处理的文件夹或文件路径: ~/Projects/MyApp

💡 默认输出路径: /Users/username/Projects/MyApp_compressed_20240123_143052.txt
请输入自定义输出路径 (直接回车使用默认路径): ~/Backups/MyApp_v1.0.txt

📁 将保存到: /Users/username/Backups/MyApp_v1.0.txt
```

### 示例 2: 配置文件备份

```
请选择功能 (1/2/3/0): 2
请输入要处理的文件夹或文件路径: ~/.config

💡 默认输出路径: /Users/username/.config_compressed_20240123_143052.txt
请输入自定义输出路径 (直接回车使用默认路径): /Backups/configs/

📁 将保存到: /Backups/configs/compressed_files_.config.txt
```

### 示例 3: 使用默认路径

```
请选择功能 (1/2/3/0): 2
请输入要处理的文件夹或文件路径: /important/documents

💡 默认输出路径: /important/documents_compressed_20240123_143052.txt
请输入自定义输出路径 (直接回车使用默认路径): [直接回车]

📁 将保存到: /important/documents_compressed_20240123_143052.txt
```

## 🔄 恢复功能

恢复功能也得到了改进：

```
请选择功能 (1/2/3/0): 3
请输入快照文件路径: /backups/my_backup.txt

💡 请指定恢复目标目录
请输入要恢复到的文件夹路径: /restore/location

📁 将恢复到: /restore/location
正在读取并解压缩文件...
恢复进度: [##################################################] 100%

文件已从 /backups/my_backup.txt 恢复到 /restore/location
```

## 💡 最佳实践

### 1. 文件命名建议

- **包含日期**: `project_20240123.txt`
- **版本标识**: `project_v1.0.txt`
- **内容描述**: `configs_backup.txt`

### 2. 目录组织

```
/Backups/
├── daily/          # 日常备份
├── projects/       # 项目备份
├── configs/        # 配置备份
└── archives/       # 长期存档
```

### 3. 路径使用技巧

- **绝对路径**: 确保路径明确 `/full/path/to/backup.txt`
- **相对路径**: 相对当前目录 `./backups/file.txt`
- **家目录**: 使用 `~/` 简化路径 `~/Backups/file.txt`

## ⚠️ 注意事项

1. **权限检查**: 确保对输出目录有写权限
2. **磁盘空间**: 确保有足够空间存储备份文件
3. **路径长度**: 避免过长的文件路径
4. **特殊字符**: 避免在路径中使用特殊字符

## 🆚 命令行 vs 交互式

| 功能 | 命令行模式 | 交互式模式 |
|------|------------|------------|
| 输出路径 | `--output` 参数 | 交互式输入 |
| 默认路径 | 智能生成 | 预览 + 确认 |
| 路径验证 | 自动 | 自动 + 提示 |
| 错误处理 | 退出码 | 友好提示 |
| 适用场景 | 脚本/自动化 | 手动操作 |

## 🎉 总结

新的交互式模式提供了：

- ✅ **灵活的输出路径控制**
- ✅ **友好的用户界面**
- ✅ **智能的默认行为**
- ✅ **完善的错误处理**
- ✅ **与命令行模式的一致性**

无论你是偶尔使用还是频繁备份，新的交互式模式都能提供更好的用户体验！